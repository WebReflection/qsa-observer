/*! (c) Andrea Giammarchi - ISC */
const e="querySelectorAll",t="querySelectorAll",{document:o,Element:l,MutationObserver:r,Set:s,WeakMap:a}=self,n=e=>t in e,{filter:d}=[];var c=c=>{const h=new a,f=(e,t)=>{let o;if(t)for(let l,r=(e=>e.matches||e.webkitMatchesSelector||e.msMatchesSelector)(e),a=0,{length:n}=i;a<n;a++)r.call(e,l=i[a])&&(h.has(e)||h.set(e,new s),o=h.get(e),o.has(l)||(o.add(l),c.handle(e,t,l)));else h.has(e)&&(o=h.get(e),h.delete(e),o.forEach((o=>{c.handle(e,t,o)})))},u=(e,t=!0)=>{for(let o=0,{length:l}=e;o<l;o++)f(e[o],t)},{query:i}=c,v=c.root||o,S=((t,o=document,l=MutationObserver,r=["*"])=>{const s=(o,l,r,a,n,d)=>{for(const c of o)(d||e in c)&&(n?r.has(c)||(r.add(c),a.delete(c),t(c,n)):a.has(c)||(a.add(c),r.delete(c),t(c,n)),d||s(c[e](l),l,r,a,n,!0))},a=new l((e=>{if(r.length){const t=r.join(","),o=new Set,l=new Set;for(const{addedNodes:r,removedNodes:a}of e)s(a,t,o,l,!1,!1),s(r,t,o,l,!0,!1)}})),{observe:n}=a;return(a.observe=e=>n.call(a,e,{subtree:!0,childList:!0}))(o),a})(f,v,r,i),{attachShadow:b}=l.prototype;return b&&(l.prototype.attachShadow=function(e){const t=b.call(this,e);return S.observe(t),t}),i.length&&u(v[t](i)),{drop:e=>{for(let t=0,{length:o}=e;t<o;t++)h.delete(e[t])},flush:()=>{const e=S.takeRecords();for(let t=0,{length:o}=e;t<o;t++)u(d.call(e[t].removedNodes,n),!1),u(d.call(e[t].addedNodes,n),!0)},observer:S,parse:u}};export{c as default};
