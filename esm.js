/*! (c) Andrea Giammarchi - ISC */
const e=!0,t=!1,o="querySelectorAll",l="querySelectorAll",{document:r,Element:s,MutationObserver:a,Set:n,WeakMap:d}=self,c=e=>l in e,{filter:h}=[];var f=f=>{const u=new d,i=(e,t)=>{let o;if(t)for(let l,r=(e=>e.matches||e.webkitMatchesSelector||e.msMatchesSelector)(e),s=0,{length:a}=S;s<a;s++)r.call(e,l=S[s])&&(u.has(e)||u.set(e,new n),o=u.get(e),o.has(l)||(o.add(l),f.handle(e,t,l)));else u.has(e)&&(o=u.get(e),u.delete(e),o.forEach((o=>{f.handle(e,t,o)})))},v=(e,t=!0)=>{for(let o=0,{length:l}=e;o<l;o++)i(e[o],t)},{query:S}=f,b=f.root||r,g=((l,r=document,s=MutationObserver,a=["*"])=>{const n=(t,r,s,a,d,c)=>{for(const h of t)(c||o in h)&&(d?s.has(h)||(s.add(h),a.delete(h),l(h,d)):a.has(h)||(a.add(h),s.delete(h),l(h,d)),c||n(h[o](r),r,s,a,d,e))},d=new s((o=>{if(a.length){const l=a.join(","),r=new Set,s=new Set;for(const{addedNodes:a,removedNodes:d}of o)n(d,l,r,s,t,t),n(a,l,r,s,e,t)}})),{observe:c}=d;return(d.observe=t=>c.call(d,t,{subtree:e,childList:e}))(r),d})(i,b,a,S),{attachShadow:p}=s.prototype;return p&&(s.prototype.attachShadow=function(e){const t=p.call(this,e);return g.observe(t),t}),S.length&&v(b[l](S)),{drop:e=>{for(let t=0,{length:o}=e;t<o;t++)u.delete(e[t])},flush:()=>{const e=g.takeRecords();for(let t=0,{length:o}=e;t<o;t++)v(h.call(e[t].removedNodes,c),!1),v(h.call(e[t].addedNodes,c),!0)},observer:g,parse:v}};export{f as default};
