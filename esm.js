/*! (c) Andrea Giammarchi - ISC */
const e="querySelectorAll",t="querySelectorAll",{document:o,Element:l,MutationObserver:r,Set:a,WeakMap:s}=self,d=e=>t in e,{filter:n}=[];var c=c=>{const h=new s,f=(e,t)=>{let o;if(t)for(let l,r=(e=>e.matches||e.webkitMatchesSelector||e.msMatchesSelector)(e),s=0,{length:d}=i;s<d;s++)r.call(e,l=i[s])&&(h.has(e)||h.set(e,new a),o=h.get(e),o.has(l)||(o.add(l),c.handle(e,t,l)));else h.has(e)&&(o=h.get(e),h.delete(e),o.forEach((o=>{c.handle(e,t,o)})))},u=(e,t=!0)=>{for(let o=0,{length:l}=e;o<l;o++)f(e[o],t)},{query:i}=c,S=c.root||o,g=((t,o=document,l=MutationObserver,r=["*"])=>{const a=(o,l,r,s,d,n)=>{for(const c of o)(n||e in c)&&(d?r.has(c)||(r.add(c),s.delete(c),t(c,d)):s.has(c)||(s.add(c),r.delete(c),t(c,d)),n||a(c[e](l),l,r,s,d,!0))},s=new l((e=>{if(r.length){const t=r.join(","),o=new Set,l=new Set;for(const{addedNodes:r,removedNodes:s}of e)a(s,t,o,l,!1,!1),a(r,t,o,l,!0,!1)}})),{observe:d}=s;return(s.observe=e=>d.call(s,e,{subtree:!0,childList:!0}))(o),s})(f,S,r,i),{attachShadow:p}=l.prototype;return p&&(l.prototype.attachShadow=function(e){const t=p.call(this,e);return g.add(t),t}),i.length&&u(S[t](i)),{drop:e=>{for(let t=0,{length:o}=e;t<o;t++)h.delete(e[t])},flush:()=>{const e=g.takeRecords();for(let t=0,{length:o}=e;t<o;t++)u(n.call(e[t].removedNodes,d),!1),u(n.call(e[t].addedNodes,d),!0)},observer:g,parse:u}};export{c as default};
